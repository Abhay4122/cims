git clone https://github.com/abhay4122/cims
sudo apt-get update
sudo apt-get install python3-pip apache2 libapache2-mod-wsgi-py3 -y
sudo pip3 install virtualenv
mkdir .venv
virtualenv .venv/cims
source .venv/cims/bin/activate
cd cims
pip install -r requirement.txt
sudo nano /etc/apache2/sites-available/000-default.conf


<VirtualHost *:80>

    ServerAdmin webmaster@localhost
    DocumentRoot /home/ubuntu/cims

    Alias /static /home/ubuntu/cims/statics

    <Directory /home/ubuntu/cims/statics>
        Require all granted
    </Directory>

    <Directory /home/ubuntu/cims/cims>
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>

</VirtualHost>

WSGIDaemonProcess cims python-path=/home/ubuntu/cims python-home=/home/ubuntu/.venv/cims
WSGIProcessGroup cims
WSGIScriptAlias / /home/ubuntu/cims/cims/wsgi.py

ErrorLog ${APACHE_LOG_DIR}/error.log
CustomLog ${APACHE_LOG_DIR}/access.log combined


sudo chown :www-data ~/cims

find . -path "*/migrations/*.py" -not -name "__init__.py" -delete
find . -path "*/*.pyc" -delete
rm -f db.sqlite3
find . -path "*/__pycache__" -delete

python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser

sudo service apache2 restart



DEBUG=True
SECRET_KEY=_ty$5^^vvn&*2fzere+#62ob*%ey%3h+k89_4(w*=nfcv#u7)=



Apply ssl in website

- append the billow line in /etc/apache2/sites-available/000-default.conf

<VirtualHost *:443>

    ServerAdmin webmaster@localhost
    DocumentRoot /home/ubuntu/cims

    Alias /static /home/ubuntu/cims/statics

    <Directory /home/ubuntu/cims/statics>
        Require all granted
    </Directory>

    <Directory /home/ubuntu/cims/cims>
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>
</VirtualHost>


follow the commands:

sudo snap install core; sudo snap refresh core
sudo snap install --classic certbot
sudo ln -s /snap/bin/certbot /usr/bin/certbot
sudo a2enmod ssl
sudo systemctl restart apache2
sudo certbot --apache
sudo certbot renew --dry-run




-- Docker build the image and install dependencies
sudo docker build --tag abahy4122/cims .
-- Now after create compose file
docker-compose -f docker-compose-local.yml up --build

-- Docker run the image in background
sudo docker run -d -p 8080:8000 abahy4122/cims
                OR
-- Docker auto restart the image when system reboot
sudo docker run -d -p 8080:8000 --restart unless-stopped abahy4122/cims



- CIMS data query
- reset the student record
Student.objects.filter(is_registerd=True).update(is_enrolled = False, is_examinee = False, is_certified = False, enroll_number = None, cretificate_no = None, cretificate_file = None, theory_s1=None, os=None, pretical_s1=None, oral_s1=None, theory_s2=None, pretical_s2=None, oral_s2=None)

- Get distinct orm
Student.objects.order_by('reg_year').values('reg_year').distinct()

- Reset the exam and certification
Student.objects.filter(~Q(reg_year='2021')).update(is_examinee=False, is_certified=False, cretificate_no = None, cretificate_file = None, theory_s1=None, os=None, pretical_s1=None, oral_s1=None, theory_s2=None, pretical_s2=None, oral_s2=None)